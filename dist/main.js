!function(t){var i={};function s(h){if(i[h])return i[h].exports;var e=i[h]={i:h,l:!1,exports:{}};return t[h].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=t,s.c=i,s.d=function(t,i,h){s.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:h})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,i){if(1&i&&(t=s(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var h=Object.create(null);if(s.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var e in t)s.d(h,e,function(i){return t[i]}.bind(null,e));return h},s.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="/dist/",s(s.s=1)}([function(t,i,s){},function(t,i,s){"use strict";s.r(i),s.d(i,"CELL_SIZE",(function(){return m})),s.d(i,"WALL_RADIUS",(function(){return Y})),s.d(i,"GAME_WIDTH",(function(){return X})),s.d(i,"GAME_HEIGHT",(function(){return g}));s(0);function h(t,i){for(var s=0;s<i.length;s++){var h=i[s];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}var e=function(){function t(i){var s=this;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.marble=i,this.keys,window.addEventListener("keydown",(function(t){t.preventDefault(),s.keys=s.keys||[],s.keys[t.keyCode]="keydown"==t.type})),window.addEventListener("keyup",(function(t){t.preventDefault(),s.keys[t.keyCode]="keydown"==t.type}))}var i,s,e;return i=t,(s=[{key:"handleInput",value:function(t){this.keys&&this.keys[87]&&this.marble.tiltUp(t),this.keys&&this.keys[83]&&this.marble.tiltDown(t),this.keys&&this.keys[65]&&this.marble.tiltLeft(t),this.keys&&this.keys[68]&&this.marble.tiltRight(t)}}])&&h(i.prototype,s),e&&h(i,e),t}();function o(t,i){for(var s=0;s<i.length;s++){var h=i[s];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}var l=function(){function t(i,s,h,e){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.board=i,this.marble=s,this.walls=h,this.holes=e}var i,s,h;return i=t,(s=[{key:"update",value:function(t){this.marble.update(t,this.board.accX,this.board.accY)}},{key:"drawHUD",value:function(t){t.fillStyle="blue",t.font="16px Arial",t.fillText("tiltX=".concat(this.marble.tiltX),20,26),t.fillText("tiltY=".concat(this.marble.tiltY),420,26),t.fillText("accX=".concat(this.marble.accX),20,56),t.fillText("accY=".concat(this.marble.accY),420,56),t.fillText("velX=".concat(this.marble.velX),20,86),t.fillText("velY=".concat(this.marble.velY),420,86)}},{key:"drawStartFinish",value:function(t){t.fillStyle="red",t.fillText("START",590,576),t.fillStyle="green",t.fillText("FINISH",734,620),t.strokeStyle="green",t.beginPath(),t.rect(720,576,72,72),t.stroke()}},{key:"draw",value:function(t){this.drawStartFinish(t),this.board.draw(t),this.walls.forEach((function(i){return i.draw(t)})),this.holes.forEach((function(i){return i.draw(t)})),this.marble.draw(t),this.drawHUD(t)}}])&&o(i.prototype,s),h&&o(i,h),t}();function n(t,i){for(var s=0;s<i.length;s++){var h=i[s];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}var a=function(){function t(i,s){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=i,this.height=s}var i,s,h;return i=t,(s=[{key:"draw",value:function(t){t.strokeStyle="black",t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.lineTo(0,0),t.stroke()}}])&&n(i.prototype,s),h&&n(i,h),t}();function r(t,i){for(var s=0;s<i.length;s++){var h=i[s];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}var c=function(){function t(i,s,h,e,o,l,n,a,r){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=i,this.startXCell=s,this.startYCell=h,this.orientation=e,this.length=o,this.cellSize=36,this.radius=2,this.modStart=a,this.modEnd=r,this.topLeft,this.topRight,this.bottomLeft,this.bottomRight,this.wallWidth,this.wallHeight,this.center,this.calculateDimensions(),this.calculateCenter()}var i,s,h;return i=t,(s=[{key:"calculateCenter",value:function(){this.center={x:(this.topRight.x+this.topLeft.x)/2,y:(this.topLeft.y+this.bottomLeft.y)/2}}},{key:"calculateDimensions",value:function(){"x"===this.orientation?(this.topLeft={x:this.startXCell*this.cellSize,y:this.startYCell*this.cellSize-this.radius},this.bottomLeft={x:this.startXCell*this.cellSize,y:this.startYCell*this.cellSize+this.radius},this.modStart<0?(this.topLeft.x+=this.radius,this.bottomLeft.x+=this.radius):this.modStart>0&&(this.topLeft.x-=this.radius,this.bottomLeft.x-=this.radius),this.topRight={x:(this.startXCell+this.length)*this.cellSize,y:this.startYCell*this.cellSize-this.radius},this.bottomRight={x:(this.startXCell+this.length)*this.cellSize,y:this.startYCell*this.cellSize+this.radius},this.modEnd<0?(this.topRight.x-=this.radius,this.bottomRight.x-=this.radius):this.modEnd>0&&(this.topRight.x+=this.radius,this.bottomRight.x+=this.radius)):"y"===this.orientation&&(this.topLeft={x:this.startXCell*this.cellSize-this.radius,y:this.startYCell*this.cellSize},this.topRight={x:this.startXCell*this.cellSize+this.radius,y:this.startYCell*this.cellSize},this.modStart<0?(this.topLeft.y+=this.radius,this.topRight.y+=this.radius):this.modStart>0&&(this.topLeft.y-=this.radius,this.topRight.y-=this.radius),this.bottomLeft={x:this.startXCell*this.cellSize-this.radius,y:(this.startYCell+this.length)*this.cellSize},this.bottomRight={x:this.startXCell*this.cellSize+this.radius,y:(this.startYCell+this.length)*this.cellSize},this.modEnd<0?(this.bottomLeft.y-=this.radius,this.bottomRight.y-=this.radius):this.modEnd>0&&(this.bottomLeft.y+=this.radius,this.bottomRight.y+=this.radius)),this.wallWidth=this.topRight.x-this.topLeft.x,this.wallHeight=this.bottomLeft.y-this.topLeft.y}},{key:"draw",value:function(t){t.fillStyle="blue",t.font="12 px Arial",t.fillText("".concat(this.id),this.center.x,this.center.y),t.fillStyle="black",t.fillRect(this.topLeft.x,this.topLeft.y,this.topRight.x-this.topLeft.x,this.bottomLeft.y-this.topLeft.y),t.fillStyle="red",t.beginPath(),t.arc(this.center.x,this.center.y,2,0,2*Math.PI),t.fill()}}])&&r(i.prototype,s),h&&r(i,h),t}(),u=[new c(1,18,0,"y",2,36,2,0,1),new c(2,0,2,"x",2,36,2,0,0),new c(3,10,2,"x",2,36,2,0,0),new c(4,16,2,"x",2,36,2,0,-1),new c(5,6,2,"y",4,36,2,0,-1),new c(6,8,2,"y",2,36,2,0,0),new c(7,20,2,"y",2,36,2,0,1),new c(8,2,4,"x",2,36,2,1,0),new c(9,10,4,"x",2,36,2,0,0),new c(10,16,4,"x",4,36,2,0,-1),new c(11,2,4,"y",2,36,2,-1,0),new c(12,14,4,"y",2,36,2,0,-1),new c(13,4,6,"x",6,36,2,0,0),new c(14,12,6,"x",4,36,2,1,1),new c(15,20,6,"x",2,36,2,0,0),new c(16,12,6,"y",2,36,2,-1,-1),new c(17,16,6,"y",8,36,2,-1,-1),new c(18,18,6,"y",2,36,2,0,0),new c(19,0,8,"x",4,36,2,0,0),new c(20,10,8,"x",4,36,2,0,0),new c(21,6,8,"y",4,36,2,0,-1),new c(22,8,8,"y",2,36,2,0,0),new c(23,20,8,"y",2,36,2,0,1),new c(24,2,10,"x",2,36,2,0,0),new c(25,16,10,"x",4,36,2,-1,-1),new c(26,4,12,"x",4,36,2,1,1),new c(27,12,12,"x",2,36,2,1,0),new c(28,18,12,"x",2,36,2,0,1),new c(29,2,12,"y",2,36,2,0,0),new c(30,4,12,"y",4,36,2,-1,1),new c(31,8,12,"y",4,36,2,-1,1),new c(32,10,12,"y",2,36,2,0,0),new c(33,12,12,"y",2,36,2,-1,0),new c(34,20,12,"y",2,36,2,-1,1),new c(35,14,14,"x",4,36,2,0,1),new c(36,20,14,"x",2,36,2,-1,0),new c(37,6,14,"y",4,36,2,0,0),new c(38,18,14,"y",4,36,2,-1,0),new c(39,2,16,"x",2,36,2,0,-1),new c(40,8,16,"x",8,36,2,-1,0)];function p(t,i){for(var s=0;s<i.length;s++){var h=i[s];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}var f=function(){function t(i,s,h,e,o){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.radius=i,this.width=s,this.height=h,this.walls=e,this.holes=o,this.cellSize=36,this.tiltX=0,this.tiltY=0,this.maxTiltX=45,this.maxTiltY=45,this.accX=0,this.accY=0,this.velX=0,this.velY=0,this.posX=150,this.posY=152,this.grav=.0025,this.fricSCoeff=.05,this.fricKCoeff=.05,this.tiltMultiplier=.03,this.bounciness=.1,this.stopX=!1,this.stopY=!1,this.wallRadius=2,this.halfOfLongestWallLength=4,this.distRadius=Math.sqrt(Math.pow(this.wallRadius,2)+Math.pow(this.halfOfLongestWallLength*this.cellSize+this.wallRadius,2))+this.radius,this.collision=null,this.distanceMin=this.radius,this.shiftX=0,this.shiftY=0}var i,s,h;return i=t,(s=[{key:"draw",value:function(t){t.fillStyle="orange",t.beginPath(),t.arc(this.posX,this.posY,this.radius,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(this.posX,this.posY,this.distRadius,0,2*Math.PI),t.stroke()}},{key:"quadForm",value:function(t,i,s){return[(-i-Math.sqrt(i*i-4*t*s))/(2*t),(-i+Math.sqrt(i*i-4*t*s))/(2*t)]}},{key:"calculateFricS",value:function(t){return this.fricSCoeff*this.grav*Math.cos(t)}},{key:"calculateFricK",value:function(t,i){return this.fricKCoeff*this.grav*Math.cos(t)}},{key:"degToRad",value:function(t){return t*(Math.PI/180)}},{key:"calculateAcc",value:function(t,i,s){var h,e=Math.sign(t);h=0===i?-1*e:-1*Math.sign(i);var o=this.degToRad(Math.abs(t)),l=e*this.grav*Math.sin(o),n=h*this.fricKCoeff*this.grav*Math.cos(o),a=l+n;return Math.abs(l)<=Math.abs(n)&&Math.sign(a)!==Math.sign(i)?("x"===s&&(this.stopX=!0),"y"===s&&(this.stopY=!0)):("x"===s&&(this.stopX=!1),"y"===s&&(this.stopY=!1)),a}},{key:"calculateDistance",value:function(t,i,s,h){return Math.sqrt(Math.pow(s-t,2)+Math.pow(h-i,2))}},{key:"checkBorderCollisions",value:function(){this.posX-this.radius<0?(this.collision="right",this.shiftX=2*(0-(this.posX-this.radius))):this.posX+this.radius>this.width&&(this.collision="left",this.shiftX=-2*(this.posX+this.radius-this.width)),this.posY-this.radius<0?(this.collision="bottom",this.shiftY=2*(0-(this.posY-this.radius))):this.posY+this.radius>this.height&&(this.collision="top",this.shiftY=-2*(this.posY+this.radius-this.height))}},{key:"checkWallCollisions",value:function(){var t=this,i=[];this.walls.forEach((function(s){t.calculateDistance(t.posX,t.posY,s.center.x,s.center.y)<=t.distRadius&&i.push(s)})),i.forEach((function(i){t.detectCollision(i)}))}},{key:"detectCollision",value:function(t){var i=null,s=null,h=null,e=null,o=null,l=null,n=null,a=null;this.posY<t.topLeft.y&&t.topLeft.x<=this.posX&&this.posX<=t.topRight.x&&(i=t.topLeft.y-this.posY)<=this.radius&&i<this.distanceMin&&(this.collision="top",this.distanceMin=i,this.shiftY=2*(t.topLeft.y-(this.posY+this.radius))),this.posY>t.bottomLeft.y&&t.topLeft.x<=this.posX&&this.posX<=t.topRight.x&&(i=this.posY-t.bottomLeft.y)<=this.radius&&i<this.distanceMin&&(this.collision="bottom",this.distanceMin=i,this.shiftY=2*(t.bottomLeft.y-(this.posY-this.radius))),this.posX<t.topLeft.x&&t.topLeft.y<=this.posY&&this.posY<=t.bottomLeft.y&&(i=t.topLeft.x-this.posX)<=this.radius&&i<this.distanceMin&&(this.collision="left",this.distanceMin=i,this.shiftX=2*(t.topLeft.x-(this.posX+this.radius))),this.posX>t.topRight.x&&t.topLeft.y<=this.posY&&this.posY<=t.bottomLeft.y&&(i=this.posX-t.topRight.x)<=this.radius&&i<this.distanceMin&&(this.collision="right",this.distanceMin=i,this.shiftX=2*(t.topRight.x-(this.posX-this.radius))),this.posX<t.topLeft.x&&this.posY<t.topLeft.y&&(i=this.calculateDistance(this.posX,this.posY,t.topLeft.x,t.topLeft.y))<=this.radius&&i<this.distanceMin&&(s=t.topLeft.y-this.posY,h=t.topLeft.x-this.posX,e=Math.atan(s/h),o=this.quadForm(1,-2*this.posX,Math.pow(this.posX,2)+Math.pow(t.topLeft.y-this.posY,2)-Math.pow(this.radius,2)),l=this.quadForm(1,-2*this.posY,Math.pow(this.posY,2)+Math.pow(t.topLeft.x-this.posX,2)-Math.pow(this.radius,2)),n=-2*(o[1]-t.topLeft.x),a=-2*(l[1]-t.topLeft.y),e===Math.PI/4?(this.collision="top-left",this.shiftX=n,this.shiftY=a):e<Math.PI/4?(this.collision="left",this.shiftX=n):e>Math.PI/4&&(this.collision="top",this.shiftY=a),this.distanceMin=i),this.posX>t.topRight.x&&this.posY<t.topRight.y&&(i=this.calculateDistance(this.posX,this.posY,t.topRight.x,t.topRight.y))<=this.radius&&i<this.distanceMin&&(s=t.topRight.y-this.posY,h=this.posX-t.topRight.x,e=Math.atan(s/h),o=this.quadForm(1,-2*this.posX,Math.pow(this.posX,2)+Math.pow(t.topRight.y-this.posY,2)-Math.pow(this.radius,2)),l=this.quadForm(1,-2*this.posY,Math.pow(this.posY,2)+Math.pow(t.topRight.x-this.posX,2)-Math.pow(this.radius,2)),n=2*(t.topRight.x-o[0]),a=-2*(l[1]-t.topRight.y),e===Math.PI/4?(this.collision="top-right",this.shiftX=n,this.shiftY=a):e<Math.PI/4?(this.collision="right",this.shiftX=n):e>Math.PI/4&&(this.collision="top",this.shiftY=a),this.distanceMin=i),this.posX<t.bottomLeft.x&&this.posY>t.bottomLeft.y&&(i=this.calculateDistance(this.posX,this.posY,t.bottomLeft.x,t.bottomLeft.y))<=this.radius&&i<this.distanceMin&&(s=this.posY-t.bottomLeft.y,h=t.bottomLeft.x-this.posX,e=Math.atan(s/h),o=this.quadForm(1,-2*this.posX,Math.pow(this.posX,2)+Math.pow(t.bottomLeft.y-this.posY,2)-Math.pow(this.radius,2)),l=this.quadForm(1,-2*this.posY,Math.pow(this.posY,2)+Math.pow(t.bottomLeft.x-this.posX,2)-Math.pow(this.radius,2)),n=-2*(o[1]-t.bottomLeft.x),a=2*(t.bottomLeft.y-l[0]),e===Math.PI/4?(this.collision="bottom-left",this.shiftX=n,this.shiftY=a):e<Math.PI/4?(this.collision="left",this.shiftX=n):e>Math.PI/4&&(this.collision="bottom",this.shiftY=a),this.distanceMin=i),this.posX>t.bottomRight.x&&this.posY>t.bottomRight.y&&(i=this.calculateDistance(this.posX,this.posY,t.bottomRight.x,t.bottomRight.y))<=this.radius&&i<this.distanceMin&&(s=this.posY-t.bottomRight.y,h=this.posX-t.bottomRight.x,e=Math.atan(s/h),o=this.quadForm(1,-2*this.posX,Math.pow(this.posX,2)+Math.pow(t.bottomRight.y-this.posY,2)-Math.pow(this.radius,2)),l=this.quadForm(1,-2*this.posY,Math.pow(this.posY,2)+Math.pow(t.bottomRight.x-this.posX,2)-Math.pow(this.radius,2)),n=2*(t.bottomRight.x-o[0]),a=2*(t.bottomRight.y-l[0]),e===Math.PI/4?(this.collision="bottom-right",this.shiftX=n,this.shiftY=a):e<Math.PI/4?(this.collision="right",this.shiftX=n):e>Math.PI/4&&(this.collision="bottom",this.shiftY=a),this.distanceMin=i)}},{key:"checkFinish",value:function(){return this.posX>=20*this.cellSize&&this.posY>=16*this.cellSize}},{key:"update",value:function(t){this.collision=null,this.distanceMin=this.radius,this.shiftX=0,this.shiftY=0,this.accX=this.calculateAcc(this.tiltX,this.velX,"x"),this.accY=this.calculateAcc(this.tiltY,this.velY,"y");var i=this.velX;this.velX+=this.accX*t,Math.sign(i)!==Math.sign(this.velX)&&this.stopX&&(this.velX=0,this.accX=0);var s=this.velY;this.velY+=this.accY*t,Math.sign(s)!==Math.sign(this.velY)&&this.stopY&&(this.velY=0,this.accY=0),this.posX+=this.velX*t,this.posX-this.radius<0?(this.posX=this.radius,this.velX=0):this.posX+this.radius>this.width&&(this.posX=this.width-this.radius,this.velX=0),this.posY+=this.velY*t,this.posY-this.radius<0?(this.posY=this.radius,this.velY=0):this.posY+this.radius>this.height&&(this.posY=this.height-this.radius,this.velY=0),this.checkWallCollisions(),this.checkBorderCollisions(),this.collision&&(this.posX+=this.shiftX,this.posY+=this.shiftY,"top-left"!==this.collision&&"top-right"!==this.collision&&"bottom-left"!==this.collision&&"bottom-right"!==this.collision||(this.velX*=-1*this.bounciness,this.velY*=-1*this.bounciness),"top"!==this.collision&&"bottom"!==this.collision||(this.velX*=this.bounciness,this.velY*=-1*this.bounciness),"left"!==this.collision&&"right"!==this.collision||(this.velX*=-1*this.bounciness,this.velY*=this.bounciness)),this.checkFinish()&&alert("YOU'RE WINNER")}},{key:"tiltUp",value:function(t){this.tiltY-=t*this.tiltMultiplier,this.tiltY<-1*this.maxTiltY&&(this.tiltY=-1*this.maxTiltY)}},{key:"tiltDown",value:function(t){this.tiltY+=t*this.tiltMultiplier,this.tiltY>this.maxTiltY&&(this.tiltY=this.maxTiltY)}},{key:"tiltLeft",value:function(t){this.tiltX-=t*this.tiltMultiplier,this.tiltX<-1*this.maxTiltX&&(this.tiltX=-1*this.maxTiltX)}},{key:"tiltRight",value:function(t){this.tiltX+=t*this.tiltMultiplier,this.tiltX>this.maxTiltX&&(this.tiltX=this.maxTiltX)}}])&&p(i.prototype,s),h&&p(i,h),t}();function d(t,i){for(var s=0;s<i.length;s++){var h=i[s];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}var y=function(){function t(i,s,h){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.cellSize=36,this.id=i,this.posCellX=s,this.posCellY=h,this.posX=this.posCellX*this.cellSize,this.posY=this.posCellY*this.cellSize,this.radius=.75*this.cellSize/2+16}var i,s,h;return i=t,(s=[{key:"draw",value:function(t){var i=t.createRadialGradient(this.posX,this.posY,0,this.posX,this.posY,this.radius+10);i.addColorStop(0,"black"),i.addColorStop(1,"gray"),t.fillStyle=i,t.beginPath(),t.arc(this.posX,this.posY,this.radius,0,2*Math.PI),t.fill()}}])&&d(i.prototype,s),h&&d(i,h),t}(),w=[new y(1,15,1),new y(2,5,3),new y(3,9,3),new y(4,17,6),new y(5,11,7),new y(6,1,9),new y(7,13,10),new y(8,3,11),new y(9,9,11),new y(10,21,13),new y(11,5,17),new y(12,7,17)],b=document.getElementById("game-screen").getContext("2d"),m=36,Y=2,X=22*m,g=18*m,v=m/3,x=new a(X,g),M=new f(v,X,g,u,w),L=new e(M),k=new l(x,M,u,w),R=0;requestAnimationFrame((function t(i){var s=i-R;R=i,L.handleInput(s),b.clearRect(0,0,X,g),k.update(s),k.draw(b),requestAnimationFrame(t)}))}]);
//# sourceMappingURL=main.js.map